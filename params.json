{"name":"2Checkout Ruby Tutorial","body":"Tutorial\r\n=====================\r\n\r\nIn this tutorial we will walk through integrating the 2Checkout payment method into an existing Rails 3.2.2 shopping cart application using the [twocheckout gem](https://rubygems.org/gems/twocheckout). The source for the example shopping cart application used in this tutorial can be accessed in this [Github repository](https://github.com/2checkout/2checkout-rails-tutorial/ \"2checkout-rails-tutorial\").\r\n\r\nSetting up the Example Application\r\n----------------------------------\r\n\r\nWe need an existing example application to demonstrate the integration so lets clone the 2checkout-rails-tutorial application.\r\n\r\n```shell\r\n$ git clone https://github.com/2checkout/2checkout-rails-tutorial\r\n```\r\n\r\nThis repository contains both an example before and after application so that we can follow along with the tutorial using the 2checkout-rails-example-before app and compare the result with the 2checkout-rails-example-after app. We can start by navigating to the 2checkout-rails-example-before directory.\r\n\r\n```shell\r\n$ cd 2checkout-rails-tutorial/2checkout-rails-example-before\r\n```\r\n\r\nFrom here, we run `bundle install` to install the gems from the Gemfile.\r\n\r\n```shell\r\n$ bundle install\r\n```\r\n\r\nLets run the migrations and seed the database.\r\n\r\n```shell\r\n$ rake db:migrate\r\n$ rake db:seed\r\n```\r\n\r\nFire up the example application.\r\n\r\n```shell\r\n$ rails s\r\n```\r\n\r\nView the application in your browser at\r\n[http://localhost:3000](http://localhost:3000)\r\n\r\n![](http://github.com/2checkout/2checkout-rails-tutorial/raw/master/img/1.png)\r\n\r\nAs you can see, we have an example shopping cart application that allows you to buy products. There are also a couple additional admin related features that you can access by basic authentication. Lets do this now by accessing [http://localhost:3000/products/](http://localhost:3000/products/). When prompted, enter 'admin' for the username and 'password' for the password. Now you can see menu items to \"View/Edit Products\" and \"View/Edit Orders\".\r\n\r\n![](http://github.com/2checkout/2checkout-rails-tutorial/raw/master/img/2.png)\r\n\r\nWe can test the current shopping cart functionality of the application by adding a couple of products to the cart.\r\n\r\n![](http://github.com/2checkout/2checkout-rails-tutorial/raw/master/img/3.png)\r\n\r\nThe cart calculates the total correctly and lists the appropriate lineitems and quantities, but the buyer cannot pay for their order. We will correct this by adding 2Checkout as a payment method in a few simple steps with the help of the twocheckout gem.\r\n\r\nAdding the twocheckout gem\r\n--------------------------\r\n\r\nFirst, lets stop the development server in the terminal `Ctrl + C`. Now we can add the latest version of the twocheckout gem to our Gemfile.\r\n\r\n`Gemfile`\r\n\r\n```ruby\r\ngem 'twocheckout'\r\n```\r\n\r\nNext, we need to install the gem using the `bundle install` command in our terminal.\r\n\r\n```shell\r\n$ bundle install\r\n```\r\n\r\nAdding 2Checkout as a Payment Method\r\n------------------------------------\r\n\r\nThe first thing we will do is require the twocheckout gem in our environment.\r\n\r\n`config/enviroment.rb`\r\n\r\n```ruby\r\nrequire File.expand_path('../application', __FILE__)\r\n\r\nExampleStore::Application.initialize!\r\nrequire 'twocheckout'\r\n```\r\n\r\nThis allows us to use the class methods provided by the twocheckout gem in our application. Now we can add the 2Checkout payment method to our carts view.\r\n\r\n`app/views/carts/show.html.erb`\r\n\r\n```ruby\r\n<p id=\"notice\"><%= notice %></p>\r\n\r\n<h1>Shopping Cart</h1>\r\n\r\n<table id=\"cart\" class=\"table table-striped\">\r\n  <tr>\r\n    <th>Product</th>\r\n    <th>Qty</th>\r\n    <th class=\"price\">Unit Price</th>\r\n    <th class=\"price\">Full Price</th>\r\n  </tr>\r\n  <% for line_item in @cart.line_items %>\r\n    <tr class=\"<%= cycle :odd, :even %>\">\r\n      <td><%=h line_item.product.name %></td>\r\n      <td class=\"qty\"><%= line_item.quantity %></td>\r\n      <td class=\"price\"><%= number_to_currency(line_item.unit_price) %></td>\r\n      <td class=\"price\"><%= number_to_currency(line_item.full_price) %></td>\r\n    </tr>\r\n  <% end %>\r\n  <tr>\r\n    <td class=\"total price\" colspan=\"4\">\r\n      Total: <%= number_to_currency @cart.total_price %>\r\n    </td>\r\n  </tr>\r\n</table>\r\n<% @params = {'sid' => 1817037, 'mode' => '2CO', 'merchant_order_id' => @cart.id} %>\r\n<% i=0 %>\r\n<% for line_item in @cart.line_items %>\r\n    <% @params['li_'+i.to_s+'_product_id'] = line_item.product.id.to_s %>\r\n    <% @params['li_'+i.to_s+'_name'] = line_item.product.name %>\r\n    <% @params['li_'+i.to_s+'_price'] = line_item.product.price %>\r\n    <% @params['li_'+i.to_s+'_quantity'] = line_item.quantity.to_s %>\r\n    <% i+=1 %>\r\n<% end %>\r\n\r\n<% @form = Twocheckout::Checkout.form(@params, \"Pay for your Order\") %>\r\n<%= @form.html_safe %>\r\n```\r\n\r\nLets take a second to look at what we did here. The `@params` hash was created with the `sid`_(2Checkout Account Number)_, `mode`_(2Checkout Parameter Set)_ and `merchant_order_id`_(Cart Identifier)_ key-value pairs.\r\n\r\n```ruby\r\n<% @params = {\r\n  'sid' => 1817037,\r\n  'mode' => '2CO',\r\n  'merchant_order_id' => @cart.id\r\n} %>\r\n```\r\n\r\nNext we loop through the lineitems in our @cart object and add the necessary 2Checkout lineitem parameters to our `@params` hash.\r\n\r\n```ruby\r\n<% i=0 %>\r\n<% for line_item in @cart.line_items %>\r\n    <% @params['li_'+i.to_s+'_product_id'] = line_item.product.id.to_s %>\r\n    <% @params['li_'+i.to_s+'_name'] = line_item.product.name %>\r\n    <% @params['li_'+i.to_s+'_price'] = line_item.product.price %>\r\n    <% @params['li_'+i.to_s+'_quantity'] = line_item.quantity.to_s %>\r\n    <% i+=1 %>\r\n<% end %>\r\n```\r\n\r\nNow that our hash has all of the 2Checkout sale parameters, we will use the `Twocheckout::Checkout.form()` method to generate our payment form.\r\n\r\n```ruby\r\n<% @form = Twocheckout::Checkout.form(@params, \"Pay for your Order\") %>\r\n<%= @form.html_safe %>\r\n```\r\n\r\nLets test this and make sure we setup everything correctly by loading up our server again and adding some products to our cart.\r\n\r\n![](http://github.com/2checkout/2checkout-rails-tutorial/raw/master/img/3.png)\r\n\r\nWe now have a \"Pay for your Order\" button that when clicked, passes the buyer to 2Checkout to make their payment.\r\n\r\n![](http://github.com/2checkout/2checkout-rails-tutorial/raw/master/img/4.png)\r\n\r\nAdding support for the Passback from 2Checkout\r\n----------------------------------------------\r\n\r\nOnce the sale is processed successfully, 2Checkout passes the buyer and the sale parameters back to the approved URL that you setup on the Site Management page in your 2Checkout account. We don't have a method yet to handle the passback so lets go ahead and create one in our carts controller.\r\n\r\n`app/conrollers/carts_controller.rb`\r\n\r\n```ruby\r\nclass CartsController < ApplicationController\r\n\r\n  def index\r\n    @carts = Cart.all\r\n  end\r\n\r\n  def show\r\n    @cart = current_cart\r\n  end\r\n\r\n  def new\r\n    @cart = Cart.new\r\n  end\r\n\r\n  def edit\r\n    @cart = Cart.find(params[:id])\r\n  end\r\n\r\n  def create\r\n    @cart = Cart.new(params[:cart])\r\n  end\r\n\r\n  def update\r\n    @cart = Cart.find(params[:id])\r\n  end\r\n\r\n  def destroy\r\n    @cart = Cart.find(params[:id])\r\n    @cart.destroy\r\n  end\r\n\r\n  def return\r\n    @notification = Twocheckout::ValidateResponse.purchase({:sid => 1817037, :secret => \"tango\", :order_number => params['order_number'], :total => params['total'], :key => params['key']})\r\n\r\n    @cart = Cart.find(params['merchant_order_id'])\r\n    begin\r\n      if @notification[:code] == \"PASS\"\r\n        @cart.status = 'success'\r\n        @cart.purchased_at = Time.now\r\n        @order = Order.create(:total => params['total'],\r\n          :card_holder_name => params['card_holder_name'],\r\n          :status => 'pending',\r\n          :order_number => params['order_number'])\r\n        reset_session\r\n        flash[:notice] = \"Your order was successful! We will contact you directly to confirm before delivery.\"\r\n        redirect_to root_url\r\n      else\r\n        @cart.status = \"failed\"\r\n        flash[:notice] = \"Error validating order, please contact us for assistance.\"\r\n        redirect_to root_url\r\n      end\r\n      ensure\r\n      @cart.save\r\n    end\r\n  end\r\nend\r\n\r\n```\r\n\r\nIn our new `return` method we validate the MD5 hash passed back by 2Checkout using the `Twocheckout::ValidateResponse.purchase` method. To use this method, we pass our `sid`_(2Checkout Account Number)_ and `secret`_(2Checkout Secret Word)_ in the `credentials{}` hash as the first argument and pass the `params` as the second argument.\r\n\r\n```ruby\r\n  @notification = Twocheckout::ValidateResponse.purchase({:sid => 1817037, :secret => \"tango\", :order_number => params['order_number'], :total => params['total'], :key => params['key']})\r\n```\r\n\r\nWe find the buyer's cart using the cart id passed back through the `merchant_order_id` parameter.\r\n\r\n```ruby\r\n@cart = Cart.find(params['merchant_order_id'])\r\n```\r\n\r\nWe then check the response from our `Twocheckout::ValidateResponse.purchase` method. If successful _(MD5 matches)_, the cart status is set to \"success\", a new order is created and the buyer is redirected to the site with a message indicating that their order went through successfully. If it fails, _(MD5 does not match)_, the cart status is set to \"failed\" and the buyer is redirected to the site with a message indicating that their order failed.\r\n\r\n```ruby\r\n  begin\r\n    if @notification[:code] == \"PASS\"\r\n      @cart.status = 'success'\r\n      @cart.purchased_at = Time.now\r\n      @order = Order.create(:total => params['total'],\r\n        :card_holder_name => params['card_holder_name'],\r\n        :status => 'pending',\r\n        :order_number => params['order_number'])\r\n      reset_session\r\n      flash[:notice] = \"Your order was successful! We will contact you directly to confirm before delivery.\"\r\n      redirect_to root_url\r\n    else\r\n      @cart.status = \"failed\"\r\n      flash[:notice] = \"Error validating order, please contact us for assistance.\"\r\n      redirect_to root_url\r\n    end\r\n    ensure\r\n    @cart.save\r\n  end\r\n```\r\n\r\nLets go ahead and create a route for this method.\r\n\r\n`config/routes.rb`\r\n\r\n```ruby\r\nExampleStore::Application.routes.draw do\r\n  resources :carts\r\n\r\n  resources :line_items\r\n\r\n  resources :categories\r\n\r\n  resources :orders\r\n\r\n  resources :products\r\n\r\n  match '/return'=>'carts#return'\r\n\r\n  root :to => 'categories#show', :id => 1\r\n\r\nend\r\n```\r\n\r\nNow that we have our return URL route we need to set the path as your 2Checkout account's approved URL. Lets login to our 2Checkout account and navigate to the Account tab and Site Management subtab.\r\n\r\n![](http://github.com/2checkout/2checkout-rails-tutorial/raw/master/img/5.png)\r\n\r\nFrom here we can set our new route as the approved URL, select Header Redirect and save the changes.\r\n\r\nLets acid test our application with a live sale!\r\n\r\nStart up our server _(If it's not started already.)_\r\n\r\n```shell\r\n$ rails s\r\n```\r\n\r\nAdd some products to our cart and click the **Proceed to Checkout** button and complete the order with 2Checkout.\r\n\r\n![](http://github.com/2checkout/2checkout-rails-tutorial/raw/master/img/6.png)\r\n\r\nWe now have our Rails application properly integrated with 2Checkout and can move on to adding additional functionality to check the fraud review result.\r\n\r\nINS Notifications\r\n-----------------\r\n\r\n2Checkout will send messages on each event that can occur on a sale.\r\n\r\n[2Checkout INS Documentation](https://www.2checkout.com/static/va/documentation/INS/index.html)\r\n\r\nFor this application, we want to know when the sale passes 2Checkout's fraud review, so we will create a new method to handle this message in our orders controller.\r\n\r\n`app/conrollers/orders_controller.rb`\r\n\r\n```ruby\r\nclass OrdersController < AdminController\r\n  skip_filter :authenticate, :only => [:notification]\r\n\r\n  def index\r\n    @orders = Order.all\r\n  end\r\n\r\n  def show\r\n    @order = Order.find(params[:id])\r\n  end\r\n\r\n  def new\r\n    @order = Order.new\r\n  end\r\n\r\n  def edit\r\n    @order = Order.find(params[:id])\r\n  end\r\n\r\n  def create\r\n    @order = Order.new(params[:total, :card_holder_name, :order_number])\r\n    flash[:notice] = \"Order Created Successfully.\"\r\n  end\r\n\r\n  def update\r\n    @order = Order.find(params[:id])\r\n  end\r\n\r\n  def destroy\r\n    @order = Order.find(params[:id])\r\n    @order.destroy\r\n    redirect_to orders_path\r\n  end\r\n\r\n  def notification\r\n    @notification = Twocheckout::ValidateResponse.notification({:sale_id => params['sale_id'], :vendor_id => 1817037,\r\n      :invoice_id => params['invoice_id'], :secret => \"tango\", :md5_hash => params['md5_hash']})\r\n    @order = Order.find_by_order_number(params['sale_id'])\r\n    if params['message_type'] == \"FRAUD_STATUS_CHANGED\"\r\n      begin\r\n        if @notification['code'] == \"PASS\" and params['fraud_status'] == \"pass\"\r\n          @order.status = \"success\"\r\n          render :text =>\"Fraud Status Passed\"\r\n        else\r\n          @order.status = \"failed\"\r\n          render :text =>\"Fraud Status Failed or MD5 Hash does not match!\"\r\n        end\r\n        ensure\r\n        @order.save\r\n      end\r\n    end\r\n  end\r\nend\r\n```\r\n\r\nIn our new `notification` method we validate the MD5 hash passed back by 2Checkout using the `Twocheckout::Ins.request()` method. To use this method, we pass our `sid`_(2Checkout Account Number)_ and `secret`_(2Checkout Secret Word)_ in the `credentials{}` hash as the first argument and pass the `params` as the second argument. This library returns a JSON response so we will also decode the JSON to a Hash.\r\n\r\n```ruby\r\n@notification = Twocheckout::ValidateResponse.notification({:sale_id => params['sale_id'], :vendor_id => 1817037, :invoice_id => params['invoice_id'], :secret => \"tango\", :md5_hash => params['md5_hash']})\r\n```\r\n\r\nWe find the buyer's order using the sale number passed back through the `sale_id` parameter.\r\n\r\n```ruby\r\n  @order = Order.find_by_order_number(params['sale_id'])\r\n```\r\n\r\nWe then check the response from our `Twocheckout::Ins.request()` method. If successful _(MD5 matches)_ and the `fraud_status` equals \"pass\", the order status is set to \"success\" and for debugging purposes we flash a message indicating that the sale passed fraud review. If it fails, _(MD5 does not match)_, the order status is set to \"failed\" and we flash a message indicating that the MD5 hash did not match or the sale failed fraud review.\r\n\r\n```ruby\r\n  if params['message_type'] == \"FRAUD_STATUS_CHANGED\"\r\n    begin\r\n      if @notification['code'] == \"PASS\" and params['fraud_status'] == \"pass\"\r\n        @order.status = \"success\"\r\n        render :text =>\"Fraud Status Passed\"\r\n      else\r\n        @order.status = \"failed\"\r\n        render :text =>\"Fraud Status Failed or MD5 Hash does not match!\"\r\n      end\r\n      ensure\r\n      @order.save\r\n    end\r\n  end\r\n```\r\n\r\nLets go ahead and create a route for this method.\r\n\r\n`config/routes.rb`\r\n\r\n```ruby\r\nExampleStore::Application.routes.draw do\r\n  resources :carts\r\n\r\n  resources :line_items\r\n\r\n  resources :categories\r\n\r\n  resources :orders\r\n\r\n  resources :products\r\n\r\n  match '/return'=>'carts#return'\r\n\r\n  match '/notification' => 'orders#notification'\r\n\r\n  root :to => 'categories#show', :id => 1\r\n\r\nend\r\n```\r\n\r\nNow we can setup our Notification URL path for the Fraud Status Changed message to \"http://localhost:3000/notification\" and enable the message under the Notifications page in our 2Checkout admin.\r\n\r\n![](http://github.com/2checkout/2checkout-rails-tutorial/raw/master/img/7.png)\r\n\r\nLets test our notification function. Now there are a couple ways to go about this. If you are not running the site locally, you can wait for the notifications to come on a live sale. In this tutorial, we are running the site locally so we will use the [INS testing tool](http://developers.2checkout.com/inss) to test the messages. Remember the MD5 hash must match so for easy testing, you must compute the hash based on the like below:\r\n\r\n`UPPERCASE(MD5_ENCRYPTED(sale_id + vendor_id + invoice_id + Secret Word))`\r\n\r\nYou can just use an [online MD5 Hash generator](https://www.google.com/webhp?q=md5+generator) and convert it to uppercase.\r\n\r\nBack Office API\r\n---------------\r\n\r\n2Checkout's Back Office API provides us with the ability to make calls from our application to preform sale actions, such as stopping a recurring sale or issuing a refund. _(Please visit the [2Checkout API documentation](https://www.2checkout.com/documentation/api/) for instructions on creating an API user)_. For our example application, we will setup the ability to refund a sale from the admin on the orders#show page in case the buyer's order is not in stock.\r\n\r\nTo accomplish this we will create a new refund method in the orders controller and update the orders/index view to include a refund button for each sale.\r\n\r\n`app/conrollers/orders_controller.rb`\r\n\r\n```ruby\r\nclass OrdersController < AdminController\r\n  skip_filter :authenticate, :only => [:notification]\r\n\r\n  def index\r\n    @orders = Order.all\r\n  end\r\n\r\n  def show\r\n    @order = Order.find(params[:id])\r\n  end\r\n\r\n  def new\r\n    @order = Order.new\r\n  end\r\n\r\n  def edit\r\n    @order = Order.find(params[:id])\r\n  end\r\n\r\n  def create\r\n    @order = Order.new(params[:total, :card_holder_name, :order_number])\r\n    flash[:notice] = \"Order Created Successfully.\"\r\n  end\r\n\r\n  def update\r\n    @order = Order.find(params[:id])\r\n  end\r\n\r\n  def destroy\r\n    @order = Order.find(params[:id])\r\n    @order.destroy\r\n    redirect_to orders_path\r\n  end\r\n\r\n  def notification\r\n    @notification = Twocheckout::Ins.request({:credentials => {'sid' => '1817037', 'secret' => 'tango'}, :params => params})\r\n    @notification = JSON.parse(@notification)\r\n    @order = Order.find_by_order_number(params['sale_id'])\r\n    if params['message_type'] == \"FRAUD_STATUS_CHANGED\"\r\n      begin\r\n        if @notification['code'] == \"PASS\" and params['fraud_status'] == \"pass\"\r\n          @order.status = \"success\"\r\n          render :text =>\"Fraud Status Passed\"\r\n        else\r\n          @order.status = \"failed\"\r\n          render :text =>\"Fraud Status Failed or MD5 Hash does not match!\"\r\n        end\r\n        ensure\r\n        @order.save\r\n      end\r\n    end\r\n  end\r\n\r\n  def refund\r\n    @order = Order.find(params[:id])\r\n    begin\r\n      Twocheckout::API.credentials = { :username => 'APIuser1817037', :password => 'APIpass1817037' }\r\n      @sale = Twocheckout::Sale.find(:sale_id => @order.order_number)\r\n      @response = @sale.refund!({:comment => \"Item(s) not available\", :category => 6})\r\n      @order.status = \"refunded\"\r\n      @order.save\r\n      flash[:notice] = @response[:response_message]\r\n      redirect_to orders_path\r\n    rescue Exception => e\r\n      flash[:notice] = e.message\r\n      redirect_to orders_path\r\n    end\r\n  end\r\nend\r\n```\r\n\r\nIn our new refund method, we find the order and assign it to a new instance variable.\r\n\r\n```ruby\r\n  @order = Order.find(params[:id])\r\n```\r\n\r\nWe set our 2Checkout API username and password using the `Twocheckout::API.credentials` method. We get the sale object from 2Checkout using the `Twocheckout::Sale.find` method. Then we call the `refund` method on the sale object.\r\n\r\n```ruby\r\nTwocheckout::API.credentials = { :username => 'APIuser1817037', :password => 'APIpass1817037' }\r\n@sale = Twocheckout::Sale.find(:sale_id => @order.order_number)\r\n@response = @sale.refund!({:comment => \"Item(s) not available\", :category => 6})\r\n```\r\n\r\nYou will notice that we are checking for an exception here as well. 2Checkout will return an exception if the refund cannot be issued on this sale. If the response is successful, we redirect the admin to the orders index page and flash the success response message from 2Checkout's API. If the refund fails, we redirect the admin to the orders index page and flash the error response message from 2Checkout's API.\r\n\r\nLet's setup the route for this method.\r\n\r\n`config/routes.rb`\r\n\r\n```ruby\r\nExampleStore::Application.routes.draw do\r\n  resources :carts\r\n\r\n  resources :line_items\r\n\r\n  resources :categories\r\n\r\n  resources :orders\r\n\r\n  resources :products\r\n\r\n  match '/return'=>'carts#return'\r\n\r\n  match '/notification' => 'orders#notification'\r\n\r\n  match 'orders/:id/refund' => 'orders#refund', :as => 'refund'\r\n\r\n  root :to => 'categories#show', :id => 1\r\n\r\nend\r\n```\r\n\r\nNow we can link to this method from the 'orders/index' page.\r\n\r\n`app/views/orders/index.html.erb`\r\n\r\n```ruby\r\n<p id=\"notice\"><%= notice %></p>\r\n\r\n<h1>Orders</h1>\r\n<table class=\"table table-striped\">\r\n  <thead>\r\n    <tr>\r\n      <th>ID</th>\r\n      <th>Customer Name</th>\r\n      <th>Total</th>\r\n      <th>2CO Order Number</th>\r\n      <th>Status</th>\r\n      <th>Actions</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <% @orders.each do |order| %>\r\n      <tr>\r\n        <td><%= link_to order.id, order_path(order) %></td>\r\n        <td><%= order.card_holder_name %></td>\r\n        <td><%= order.total %></td>\r\n        <td><%= order.order_number %></td>\r\n        <td><%= order.status %></td>\r\n        <td>\r\n          <%= link_to 'Destroy', order_path(order), :method => :delete, :confirm => 'Are you sure?', :class => 'btn btn-mini btn-danger' %>\r\n          <%= link_to 'Refund', refund_path(order), :confirm => 'Are you sure?', :class => 'btn btn-mini btn-danger' %>\r\n        </td>\r\n      </tr>\r\n    <% end %>\r\n  </tbody>\r\n</table>\r\n```\r\n\r\nAs you can see, all we did here is add the \"Refund\" button which links to our new `refund_path` route.\r\n\r\n```ruby\r\n  <%= link_to 'Refund', refund_path(order), :confirm => 'Are you sure?', :class => 'btn btn-mini btn-danger' %>\r\n```\r\n\r\nSo now our page has the refund option for each order and when clicked, will return the response from 2Checkout's API.\r\n\r\n![](http://github.com/2checkout/2checkout-rails-tutorial/raw/master/img/8.png)\r\n\r\nConclusion\r\n----------\r\nOur application is fully integrated! Buyers can pay for their orders and we register the order in our admin. We update the order based on the Fraud Status Changed INS message, and we provided the site admin with the ability to refund an order using 2Checkout's back office API.\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration.","tagline":"Rails Integration Tutorial"}